<!doctype html>
<html lang="ja" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å°ãƒ†ã‚¹ãƒˆå‹‰å¼·</title>
  <!-- Canvaç”¨SDKï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã§ã¯å­˜åœ¨ã—ãªã„ãŸã‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰
  <script src="/_sdk/element_sdk.js"></script>
  -->
<script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
    
    * {
      font-family: 'Noto Sans JP', sans-serif;
    }
    
    .canvas-container {
      background: white;
      border: 3px solid #333;
      border-radius: 0.5rem;
      cursor: crosshair;
      touch-action: none;
    }
    
    .question-card {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
    }
    
    .char-box {
      display: inline-block;
      margin: 0.5rem;
      position: relative;
    }
    
    .char-box.single {
      width: 200px;
      min-height: 280px; /* ç­”ãˆè¡¨ç¤ºãªã©ã§é«˜ã•ãŒå¢—ãˆã¦ã‚‚é‡ãªã‚Šã«ããã™ã‚‹ */
    }

    .char-box.multi {
      width: 250px;
      min-height: 280px;
    }

    .char-box.extra-large {
      width: 400px;
      min-height: 280px;
    }

    .flex-break {
      flex-basis: 100%;
      height: 0; /* å¼·åˆ¶æ”¹è¡Œï¼ˆæ¬¡ã®ãƒã‚¹ã‚’2è¡Œç›®ã¸ï¼‰ */
    }

    /* æç”»ä¸­ã ã‘ãƒ†ã‚­ã‚¹ãƒˆé¸æŠã‚’å¼·ãæŠ‘æ­¢ï¼ˆiPadã®é’é¸æŠå¯¾ç­–ï¼‰ */
    .no-select, .no-select * {
      -webkit-user-select: none !important;
      user-select: none !important;
      -webkit-touch-callout: none !important;
    }

    .answer-text {
      text-align: center;
      margin-top: 0.5rem;
      font-size: 3rem;
      font-weight: bold;
      color: #10b981;
      display: none; /* â˜…é€šå¸¸ã¯éè¡¨ç¤º */
      -webkit-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    .show-answers .answer-text {
      display: block; /* â˜…ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã ã‘è¡¨ç¤º */
    }
    
    .char-label {
      text-align: center;
      font-size: 1.1em; /* å…ƒã®èª­ã¿ã‚„ã™ã„å¤§ãã• */
      font-weight: bold;
      color: #3b82f6;
      margin-bottom: 0.9rem; /* â˜…ãƒã‚¹ã¨ã®é–“ã‚’åºƒã’ã¦èª¤ã‚¿ãƒƒãƒ/é¸æŠã‚’æ¸›ã‚‰ã™ */
      min-height: 1.5em;
      line-height: 1.2;
      -webkit-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      pointer-events: none;
    }
    
    .tool-selector {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    
    .tool-btn {
      padding: 0.5rem 1rem;
      border: 2px solid #333;
      border-radius: 0.5rem;
      background: white;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s;
    }
    
    .tool-btn.active {
      background: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    
    .tool-btn:hover {
      transform: scale(1.05);
    }
    
    .feedback {
      text-align: center;
      margin-top: 1rem;
      font-size: 1.5em;
      font-weight: bold;
      min-height: 2em;
    }
    
    .button-group {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      margin-top: 1rem;
    }
    
    .section {
      display: none;
    }
    
    .section.active {
      display: block;
    }
    
    .cover-card {
      background: white;
      border-radius: 2rem;
      padding: 4rem 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      text-align: center;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .section-button {
      width: 100%;
      max-width: 400px;
      padding: 1.5rem;
      font-size: 1.5rem;
      font-weight: bold;
      margin: 1rem auto;
      display: block;
      border-radius: 1rem;
      transition: all 0.3s;
    }
    
    .section-button:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <!-- Canvaç”¨SDKï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã§ã¯å­˜åœ¨ã—ãªã„ãŸã‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  -->
</head>
 <body class="h-full">
  <div class="h-full w-full" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="h-full w-full overflow-auto">
      <div class="min-h-full py-8 px-4">
        <div class="max-w-4xl mx-auto">

          <!-- Cover Section -->
          <div id="cover-section" class="section active" style="min-height: 80vh; display: flex; align-items: center; justify-content: center;">
            <div class="cover-card">
              <h1 id="cover-title" class="text-5xl font-bold mb-6" style="color: #667eea;">å°ãƒ†ã‚¹ãƒˆå‹‰å¼·</h1>
              <p id="cover-subtitle" class="text-2xl text-gray-600 mb-12">æ¼¢å­—ã®ç·´ç¿’ã‚’ã—ã‚ˆã†ï¼</p>
              <button id="goto-section-a" class="section-button bg-blue-600 hover:bg-blue-700 text-white">
                <span id="section-a-title">å•é¡Œ 1ã€œ10</span>
              </button>
              <button id="goto-section-b" class="section-button bg-purple-600 hover:bg-purple-700 text-white">
                <span id="section-b-title">å•é¡Œ 11ã€œ20</span>
              </button>
            </div>
          </div>

          <!-- Section A: Questions 1-10 -->
          <div id="questions-section-a" class="section">
            <div class="text-center mb-6">
              <button id="back-to-cover-a" class="px-6 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">â† è¡¨ç´™ã«æˆ»ã‚‹</button>
            </div>
            <h2 id="section-a-header" class="text-4xl font-bold text-white text-center mb-8">å•é¡Œ 1ã€œ10</h2>
            <div id="questions-container-a"></div>
            <div class="text-center mt-8">
              <button id="reset-btn-a" class="px-8 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">ã‚‚ã†ä¸€åº¦ç·´ç¿’ã™ã‚‹</button>
            </div>
            <div class="text-center mt-4">
              <button id="back-to-cover-a-bottom" class="px-6 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">â† è¡¨ç´™ã«æˆ»ã‚‹</button>
            </div>
          </div>

          <!-- Section B: Questions 11-20 -->
          <div id="questions-section-b" class="section">
            <div class="text-center mb-6">
              <button id="back-to-cover-b" class="px-6 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">â† è¡¨ç´™ã«æˆ»ã‚‹</button>
            </div>
            <h2 id="section-b-header" class="text-4xl font-bold text-white text-center mb-8">å•é¡Œ 11ã€œ20</h2>
            <div id="questions-container-b"></div>
            <div class="text-center mt-8">
              <button id="reset-btn-b" class="px-8 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">ã‚‚ã†ä¸€åº¦ç·´ç¿’ã™ã‚‹</button>
            </div>
            <div class="text-center mt-4">
              <button id="back-to-cover-b-bottom" class="px-6 py-3 bg-white hover:bg-gray-100 text-indigo-600 font-bold rounded-lg shadow-lg transition">â† è¡¨ç´™ã«æˆ»ã‚‹</button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script>
    // ==============================
    //  å°ãƒ†ã‚¹ãƒˆå‹‰å¼·ï¼ˆ1ã€œ10 / 11ã€œ20ï¼‰
    //  - å•é¡Œã®å·®ã—æ›¿ãˆã¯ QUESTIONS ã‚’ç·¨é›†ã™ã‚‹ã ã‘
    //  - é€”ä¸­ã§2è¡Œç›®ã«é€ã‚ŠãŸã„ã¨ãã¯ "|/|" ã‚’å…¥ã‚Œã‚‹
    //    ä¾‹: "è©±ã™|/|ä¸‹|æ‰‹"ï¼ˆã€Œä¸‹ã€ã‚’2è¡Œç›®ã«ï¼‰
    // ==============================

    const APP = {
      title: "å°ãƒ†ã‚¹ãƒˆå‹‰å¼·",
      subtitle: "æ¼¢å­—ã®ç·´ç¿’ã‚’ã—ã‚ˆã†ï¼",
      sections: [
        { id: 'a', title: 'å•é¡Œ 1ã€œ10', start: 1, end: 10 },
        { id: 'b', title: 'å•é¡Œ 11ã€œ20', start: 11, end: 20 },
      ]
    };

    // â˜…ã“ã“ã ã‘ç›´ã›ã°åˆ¥ã®20å•ã«å·®ã—æ›¿ãˆã§ãã¾ã™
    const QUESTIONS = [
      { q: "ãƒ¡ãƒ€ã‚«ã‚’ã—ã„ãã™ã‚‹ã€‚", a: "é£¼|è‚²", f: "ã—|ã„ã" },
      { q: "ã‚¿ãƒ³ãƒãƒã®ã‚ãŸã’ã€‚", a: "ç¶¿|æ¯›", f: "ã‚ãŸ|ã’" },
      { q: "ãã‚ƒãã‚’ã„ã¾ã«ã¨ãŠã™ã€‚", a: "å®¢|å±…|é–“|é€šã™", f: "ãã‚ƒã|ã„|ã¾|ã¨ãŠã™" },
      { q: "ãˆã„ãã‚…ã†ã«ã‹ã‚ã‚‰ãªã„ã€‚", a: "æ°¸|ä¹…|å¤‰ã‚ã‚‰ãªã„", f: "ãˆã„|ãã‚…ã†|ã‹ã‚ã‚‰ãªã„" },
      { q: "ã—ã¿ãšãŒã‚ãã€‚", a: "æ¸…|æ°´", f: "ã—|ã¿ãš" },

      { q: "ã‹ã‚ã‚‰ã§ã„ã¬ã¨ã‚ãã¶ã€‚", a: "å·|åŸ|çŠ¬|éŠã¶", f: "ã‹ã‚|ã‚‰|ã„ã¬|ã‚ãã¶" },
      { q: "ããšãã¡ã‚’ã—ã‚‡ã†ã©ãã™ã‚‹ã€‚", a: "å£|æ¶ˆ|æ¯’", f: "ãã¡|ã—ã‚‡ã†|ã©ã" },
      { q: "ã—ã‚‡ã†ã¦ã‚“ãŒã„ã®ã‚„ãŠã‚„ã€‚", a: "å•†|åº—|è¡—|å…«|ç™¾|å±‹", f: "ã—ã‚‡ã†|ã¦ã‚“|ãŒã„|ã‚„|ãŠ|ã‚„" },
      { q: "ã¯ã¡ã˜ã¾ã§ãˆã„ãã‚‡ã†ã™ã‚‹ã€‚", a: "å…«|æ™‚|å–¶|æ¥­", f: "ã¯ã¡|ã˜|ãˆã„|ãã‚‡ã†" },
      { q: "ãã›ã¤ã®ãã ã‚‚ã®ã‚’ãŸã¹ã‚‹ã€‚", a: "å­£|ç¯€|æœ|ç‰©|é£Ÿã¹ã‚‹", f: "ã|ã›ã¤|ãã |ã‚‚ã®|ãŸã¹ã‚‹" },

      { q: "ã„ã‚‚ã†ã¨ãŒã¾ã„ã”ã«ãªã‚‹ã€‚", a: "å¦¹|è¿·|å­", f: "ã„ã‚‚ã†ã¨|ã¾ã„|ã”" },
      { q: "ã‚ãŒã­ã‚’ã‹ã‘ã‚‹ã€‚", a: "çœ¼|é¡", f: "ã‚|ãŒã­" },
      { q: "ã¼ã†ã¯ã‚“ãƒ–ã‚¶ãƒ¼ã‚’ãªã‚‰ã™ã€‚", a: "é˜²|çŠ¯|é³´ã‚‰ã™", f: "ã¼ã†|ã¯ã‚“|ãªã‚‰ã™" },
      { q: "ãŠã‚“ãŒããã‚‡ã†ã—ã¤ã®ã“ã†ã—ã€‚", a: "éŸ³|æ¥½|æ•™|å®¤|è¬›|å¸«", f: "ãŠã‚“|ãŒã|ãã‚‡ã†|ã—ã¤|ã“ã†|ã—" },
      { q: "ã›ã„ã‚Šã‚‡ãã¦ãã«ã‘ã‚“ãã‚…ã†ã™ã‚‹ã€‚", a: "ç²¾|åŠ›|çš„|ç ”|ç©¶", f: "ã›ã„|ã‚Šã‚‡ã|ã¦ã|ã‘ã‚“|ãã‚…ã†" },

      // â˜…è¦æœ›: ã€Œã¸ã€ã‚’2è¡Œç›®ã¸ï¼ˆ=ã€Œä¸‹ã€ã®ãƒã‚¹ã‚’2è¡Œç›®ã¸ï¼‰
      { q: "ã¯ãªã™ã®ãŒã¸ãŸã ã€‚", a: "è©±ã™|/|ä¸‹|æ‰‹", f: "ã¯ãªã™|/|ã¸|ãŸ" },
      { q: "ã„ãˆã§ã­ã“ã‚’ã‹ã†ã€‚", a: "å®¶|é£¼ã†", f: "ã„ãˆ|ã‹ã†" },
      { q: "ã¦ã‚“ãã‚‡ã®ãŸã‚ˆã‚ŠãŒã¨ã©ãã€‚", a: "è»¢|å±…|ä¾¿ã‚Š", f: "ã¦ã‚“|ãã‚‡|ãŸã‚ˆã‚Š" },

      // â˜…è¦æœ›: ã€Œã“ã†ã€ã‚’2è¡Œç›®ã¸ï¼ˆ=ã€Œå¹¸ã€ã®ãƒã‚¹ã‚’2è¡Œç›®ã¸ï¼‰
      { q: "ã™ãˆãªãŒã„ã“ã†ãµãã‚’ã„ã®ã‚‹ã€‚", a: "æœ«|æ°¸ã„|/|å¹¸|ç¦", f: "ã™ãˆ|ãªãŒã„|/|ã“ã†|ãµã" },
      { q: "ã‹ããã§ã®ã†ãã‚‡ã†ã‚’ã„ã¨ãªã‚€ã€‚", a: "å®¶|æ—|è¾²|æ¥­|å–¶ã‚€", f: "ã‹|ãã|ã®ã†|ãã‚‡ã†|ã„ã¨ãªã‚€" },
    ];

    // ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
    const $ = (sel, root = document) => root.querySelector(sel);

    function tokenize(aStr, fStr) {
      const a = (aStr || '').split('|');
      const f = (fStr || '').split('|');
      const max = Math.max(a.length, f.length);
      const out = [];
      for (let i = 0; i < max; i++) {
        const at = (a[i] ?? '').trim();
        const ft = (f[i] ?? '').trim();
        if (at === '/' || ft === '/' || at === 'BR' || ft === 'BR') { out.push({ br: true }); continue; }
        if (!at) continue;
        out.push({ t: at, f: ft });
      }
      return out;
    }

    // ===== çŠ¶æ…‹ï¼ˆ1å§‹ã¾ã‚Šï¼‰ =====
    const N = QUESTIONS.length;
    const tool = Array(N + 1).fill('pen');
    const parts = Array.from({ length: N + 1 }, () => []); // parts[q] = [{canvas, ctx, answerEl}, ...]

    // ===== ç”»é¢åˆ‡ã‚Šæ›¿ãˆ =====
    function showSection(sectionId) {
      ['cover-section', 'questions-section-a', 'questions-section-b'].forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.classList.remove('active');
        el.style.display = 'none';
      });
      const target = document.getElementById(sectionId);
      if (target) {
        target.classList.add('active');
        target.style.display = 'block';
      }
      const sc = document.querySelector('.h-full.w-full.overflow-auto');
      if (sc) sc.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ===== æç”»ï¼ˆPointer Eventsã§çµ±ä¸€ï¼šãƒã‚¦ã‚¹/ã‚¿ãƒƒãƒä¸¡å¯¾å¿œï¼‰ =====
    function attachDraw(canvas, qNum) {
      const ctx = canvas.getContext('2d');
      ctx.lineCap = 'round';

      let down = false;
      let lx = 0, ly = 0;

      const pos = (e) => {
        const r = canvas.getBoundingClientRect();
        return { x: e.clientX - r.left, y: e.clientY - r.top };
      };

      const stroke = (from, to) => {
        ctx.beginPath();
        ctx.moveTo(from.x, from.y);
        ctx.lineTo(to.x, to.y);
        if (tool[qNum] === 'eraser') {
          ctx.globalCompositeOperation = 'destination-out';
          ctx.lineWidth = 14;
        } else {
          ctx.globalCompositeOperation = 'source-over';
          ctx.strokeStyle = '#000';
          ctx.lineWidth = 4;
        }
        ctx.stroke();
      };

      const setNoSelect = (on) => {
        // æç”»ä¸­ã ã‘å…¨ä½“ã®æ–‡å­—é¸æŠã‚’æŠ‘æ­¢ï¼ˆèª¤é¸æŠã‚’å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã§æ¸›ã‚‰ã™ï¼‰
        document.documentElement.classList.toggle('no-select', on);
      };

      canvas.addEventListener('pointerdown', (e) => {
        e.preventDefault();
        down = true;
        setNoSelect(true);
        canvas.setPointerCapture(e.pointerId);
        const p = pos(e);
        lx = p.x; ly = p.y;
      });

      canvas.addEventListener('pointermove', (e) => {
        if (!down) return;
        e.preventDefault();
        const p = pos(e);
        stroke({ x: lx, y: ly }, p);
        lx = p.x; ly = p.y;
      });

      const end = (e) => {
        down = false;
        setNoSelect(false);
        try { canvas.releasePointerCapture(e.pointerId); } catch (_) {}
      };
      canvas.addEventListener('pointerup', end);
      canvas.addEventListener('pointercancel', end);

      return ctx;
    }

    // ===== ãƒã‚¹ç”Ÿæˆ =====
    function makeBox(qNum, text, furi) {
      const box = document.createElement('div');
      const hasOkurigana = /[ã-ã‚“]/.test(text);
      const isXL = text.length >= 5;
      box.className = 'char-box ' + (isXL ? 'extra-large' : (hasOkurigana ? 'multi' : 'single'));

      const label = document.createElement('div');
      label.className = 'char-label';
      label.textContent = furi || '';

      const canvas = document.createElement('canvas');
      canvas.className = 'canvas-container';
      canvas.width = isXL ? 450 : (hasOkurigana ? 300 : 200);
      canvas.height = 200;

      const ans = document.createElement('div');
      ans.className = 'answer-text';
      ans.textContent = text;

      box.append(label, canvas, ans);

      const ctx = attachDraw(canvas, qNum);
      parts[qNum].push({ canvas, ctx, answerEl: ans });

      return box;
    }

    // ===== å•é¡Œã‚«ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆçŸ­ããƒ»å£Šã‚Œã«ããï¼‰ =====
    function buildCard(qNum) {
      const item = QUESTIONS[qNum - 1];

      const card = document.createElement('div');
      card.className = 'question-card';

      const h3 = document.createElement('h3');
      h3.className = 'text-2xl font-bold text-gray-800 mb-4';
      h3.textContent = `å•é¡Œ${qNum}`;

      const q = document.createElement('p');
      q.className = 'text-2xl text-gray-700 mb-4';
      q.textContent = item?.q || '';

      const hint = document.createElement('p');
      hint.className = 'text-lg text-gray-600 mb-4';
      hint.textContent = 'ä¸‹ã®ãƒã‚¹ã«æ¼¢å­—ã‚’æ›¸ã„ã¦ãã ã•ã„';

      const toolSel = document.createElement('div');
      toolSel.className = 'tool-selector';

      const pen = document.createElement('button');
      pen.className = 'tool-btn active';
      pen.textContent = 'âœï¸ ãƒšãƒ³';

      const er = document.createElement('button');
      er.className = 'tool-btn';
      er.textContent = 'ğŸ§½ æ¶ˆã—ã‚´ãƒ ';

      toolSel.append(pen, er);

      const wrap = document.createElement('div');
      wrap.className = 'flex justify-center flex-wrap';

      const btnGroup = document.createElement('div');
      btnGroup.className = 'button-group';

      const ansBtn = document.createElement('button');
      ansBtn.className = 'px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition';
      ansBtn.textContent = 'ç­”ãˆã‚’è¦‹ã‚‹';

      btnGroup.append(ansBtn);

      const feedback = document.createElement('div');
      feedback.className = 'feedback';

      card.append(h3, q, hint, toolSel, wrap, btnGroup, feedback);

      const setTool = (t) => {
        tool[qNum] = t;
        pen.classList.toggle('active', t === 'pen');
        er.classList.toggle('active', t === 'eraser');
      };

      const render = () => {
        wrap.classList.remove('show-answers');
        ansBtn.textContent = 'ç­”ãˆã‚’è¦‹ã‚‹';
        parts[qNum] = [];
        wrap.innerHTML = '';

        tokenize(item?.a || '', item?.f || '').forEach(tok => {
          if (tok.br) {
            const br = document.createElement('div');
            br.className = 'flex-break';
            wrap.appendChild(br);
          } else {
            wrap.appendChild(makeBox(qNum, tok.t, tok.f));
          }
        });

        setTool('pen');
        feedback.textContent = '';
      };

      // ãƒ„ãƒ¼ãƒ«
      pen.addEventListener('click', () => setTool('pen'));
      er.addEventListener('click', () => setTool('eraser'));

      // ç­”ãˆãƒˆã‚°ãƒ«ï¼ˆDOMã‚’ä½œã‚Šç›´ã•ãªã„ã®ã§å®‰å®šï¼‰
      ansBtn.addEventListener('click', () => {
        const showing = wrap.classList.toggle('show-answers');
        ansBtn.textContent = showing ? 'ç­”ãˆã‚’æ¶ˆã™' : 'ç­”ãˆã‚’è¦‹ã‚‹';
        feedback.textContent = '';
      });

      // å¤–ã‹ã‚‰ãƒªã‚»ãƒƒãƒˆã§ãã‚‹ã‚ˆã†ã«
      card.__render = render;
      render();
      return card;
    }

    function buildSection(containerId, startNum, endNum) {
      const c = document.getElementById(containerId);
      if (!c) return;
      c.innerHTML = '';
      for (let n = startNum; n <= endNum; n++) c.appendChild(buildCard(n));
    }

    function resetSection(containerId) {
      const c = document.getElementById(containerId);
      if (!c) return;
      c.querySelectorAll('.question-card').forEach(card => card.__render && card.__render());
      const sc = document.querySelector('.h-full.w-full.overflow-auto');
      if (sc) sc.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ===== èµ·å‹• =====
    document.addEventListener('DOMContentLoaded', () => {
      // è¡¨ç´™ãƒ†ã‚­ã‚¹ãƒˆ
      const coverTitle = document.getElementById('cover-title');
      const coverSub = document.getElementById('cover-subtitle');
      if (coverTitle) coverTitle.textContent = APP.title;
      if (coverSub) coverSub.textContent = APP.subtitle;

      const aTitle = document.getElementById('section-a-title');
      const bTitle = document.getElementById('section-b-title');
      const aHeader = document.getElementById('section-a-header');
      const bHeader = document.getElementById('section-b-header');
      if (aTitle) aTitle.textContent = APP.sections[0].title;
      if (bTitle) bTitle.textContent = APP.sections[1].title;
      if (aHeader) aHeader.textContent = APP.sections[0].title;
      if (bHeader) bHeader.textContent = APP.sections[1].title;

      // å•é¡Œæ•°ãƒã‚§ãƒƒã‚¯ï¼ˆäº‹æ•…äºˆé˜²ï¼‰
      if (QUESTIONS.length !== 20) {
        console.warn('QUESTIONS ã¯ 20å• ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚ç¾åœ¨:', QUESTIONS.length);
      }

      // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
      buildSection('questions-container-a', 1, 10);
      buildSection('questions-container-b', 11, 20);

      // ãƒŠãƒ“
      $('#goto-section-a')?.addEventListener('click', () => showSection('questions-section-a'));
      $('#goto-section-b')?.addEventListener('click', () => showSection('questions-section-b'));
      $('#back-to-cover-a')?.addEventListener('click', () => showSection('cover-section'));
      $('#back-to-cover-a-bottom')?.addEventListener('click', () => showSection('cover-section'));
      $('#back-to-cover-b')?.addEventListener('click', () => showSection('cover-section'));
      $('#back-to-cover-b-bottom')?.addEventListener('click', () => showSection('cover-section'));

      // ãƒªã‚»ãƒƒãƒˆ
      $('#reset-btn-a')?.addEventListener('click', () => resetSection('questions-container-a'));
      $('#reset-btn-b')?.addEventListener('click', () => resetSection('questions-container-b'));

      // åˆæœŸè¡¨ç¤º
      showSection('cover-section');
    });
  </script>
</body>
</html>
